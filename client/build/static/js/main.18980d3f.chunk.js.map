{"version":3,"sources":["components/_useChat.js","components/ChatBox/index.js","components/Messages/index.js","components/Settings/index.js","components/Chat.js","index.js"],"names":["useChat","useState","messages","setMessages","users","setUsers","ioRef","useRef","useEffect","HOST","window","location","hostname","console","log","current","socketIOClient","on","fullMessage","num","disconnect","sendMessage","emit","ChatBox","onSendMessage","nickname","color","message","setMessage","submit","className","style","rows","placeholder","value","onChange","e","target","onKeyDown","key","preventDefault","onClick","Messages","displayMessages","map","item","index","date","fontWeight","last","scrollIntoView","behavior","height","padding","margin","ref","Settings","setNickname","setColor","nicknameForm","setNicknameForm","settingsToggle","setToggle","colorForm","setColorForm","colorOptions","i","role","aria-label","onSubmit","type","Chat","localStorage","getItem","n","c","setItem","Date","now","toLocaleString","hour","minute","second","hour12","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.18980d3f.chunk.js","sourcesContent":["import { useEffect, useState, useRef } from 'react'\r\nimport socketIOClient from \"socket.io-client\"\r\n\r\nconst useChat = () => {\r\n    const [messages, setMessages] = useState([]) //array of messages\r\n    const [users, setUsers] = useState()\r\n    const ioRef = useRef()\r\n\r\n    useEffect(() => {\r\n        const HOST =  window.location.hostname\r\n        console.log(`Connected to ${HOST}`)\r\n        ioRef.current = socketIOClient(HOST) // reference to socketiocliet\r\n\r\n        ioRef.current.on('newMessage', fullMessage => {\r\n            setMessages(messages => {\r\n                return [...messages, fullMessage]\r\n            })\r\n        })\r\n\r\n        ioRef.current.on('users', num => {\r\n            setUsers(num)\r\n        })\r\n\r\n\r\n        //cleanup\r\n        return () => {\r\n            ioRef.current.disconnect()\r\n        }\r\n    }, [])\r\n\r\n    const sendMessage = (fullMessage) => {\r\n        //send to all connected users\r\n        ioRef.current.emit('newMessage', fullMessage)\r\n    }\r\n    //return messages and sendMessage to use in chatbox\r\n    return { messages, sendMessage, users }\r\n}\r\n\r\nexport default useChat","import React, { useState } from 'react'\r\n\r\nconst ChatBox = ({ onSendMessage, nickname, color }) => {\r\n    const [message, setMessage] = useState('')\r\n\r\n    //cannot be normal form due to enter behavior on textarea\r\n    const submit = () => {\r\n        if (message) { onSendMessage(message) }\r\n        setMessage('')\r\n    }\r\n\r\n    return <div className=\"chatbox-container\">\r\n        <p className=\"nickname\" style={{ color }}>{nickname}: </p>\r\n        <textarea\r\n            rows=\"2\"\r\n            placeholder=\"Enter a message...\"\r\n            value={message}\r\n            onChange={e => setMessage(e.target.value)}\r\n            //set enter behavior\r\n            onKeyDown={e => {\r\n                if (e.key === 'Enter') {\r\n                    e.preventDefault()\r\n                    submit()\r\n                }\r\n            }}\r\n        >\r\n        </textarea>\r\n        <button onClick={e => { submit() }}>Submit</button>\r\n    </div>\r\n}\r\n\r\nexport default ChatBox\r\n","import React, { useEffect, useRef } from 'react'\r\n\r\nconst Messages = ({ messages, users }) => {\r\n    const displayMessages = messages.map((item, index) => <li key={index}>{item.date} - <span style={{ fontWeight: 'bold', color: item.color }}>{item.nickname}</span>:  {item.message}</li>)\r\n    const last = useRef()\r\n    const scrollToBottom = () => {\r\n        last.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n\r\n    useEffect(() => {\r\n        scrollToBottom()\r\n    })\r\n\r\n    return (\r\n        <div className=\"messages\">\r\n            <h2>ChatZone</h2>\r\n            <h3>{users} user(s) online</h3>\r\n            <ul>\r\n                <li><em>Welcome to the chat.</em></li>\r\n                {displayMessages}\r\n                <li style={{ height: '1px', padding: 0, margin: 0 }} ref={last}></li>\r\n            </ul>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Messages\r\n","import React, { useState } from 'react'\r\n\r\nconst Settings = ({ nickname, setNickname, color, setColor }) => {\r\n\r\n    const [nicknameForm, setNicknameForm] = useState('')\r\n    const [settingsToggle, setToggle] = useState(false)\r\n    const [colorForm, setColorForm] = useState(color)\r\n\r\n    const colors = ['Black', 'Red', 'Blue', 'Green', 'Teal', 'Purple', 'HotPink']\r\n    const colorOptions = colors.map((color, i) => <option key={i} value={color} style={{ color, fontWeight: 'bold' }}>{color}</option>)\r\n    return settingsToggle ? (\r\n        <div className=\"settings\">\r\n            <button className='settings-button' onClick={e => setToggle(!settingsToggle)}><span role=\"img\" aria-label=\"close\">‚úñÔ∏è</span></button>\r\n            <form onSubmit={e => {\r\n                e.preventDefault()\r\n                if (nicknameForm) { setNickname(nicknameForm) }\r\n                setColor(colorForm)\r\n                setNicknameForm('')\r\n            }} >\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Nickname\"\r\n                    value={nicknameForm}\r\n                    onChange={e => setNicknameForm(e.target.value)} />\r\n                <select\r\n                    onChange={e => setColorForm(e.target.value)}\r\n                    value={colorForm}>\r\n                    {colorOptions}\r\n                </select>\r\n                <button><span role=\"img\" aria-label=\"Save\">üíæ</span> Save Settings</button>\r\n            </form>\r\n        </div >\r\n    ) : <button className='settings-button' onClick={e => setToggle(!settingsToggle)}><span role=\"img\" aria-label=\"Settings\">üîß</span></button>\r\n}\r\n\r\nexport default Settings\r\n","import React, { useState, useEffect } from 'react'\n\nimport './App.css';\nimport useChat from './_useChat'\nimport ChatBox from './ChatBox'\nimport Messages from './Messages'\nimport Settings from './Settings'\n\nconst Chat = () => {\n  const [nickname, setNickname] = useState('Anonymous')\n  const [color, setColor] = useState('Black')\n  const { messages, sendMessage, users } = useChat() // pull state and function to emit from useChat hook\n\n  useEffect(() => {\n    if (localStorage.getItem('nickname')) {\n      const n = localStorage.getItem('nickname') || ''\n      const c = localStorage.getItem('color') || ''\n      setColor(c)\n      setNickname(n)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (nickname) {\n      localStorage.setItem('nickname', nickname)\n    }\n    if (color) {\n      localStorage.setItem('color', color)\n    }\n  })\n\n  return (\n    <div className=\"App\">\n      <Settings setNickname={setNickname} color={color} setColor={setColor} />\n      <Messages messages={messages} users={users} />\n      <ChatBox\n        nickname={nickname}\n        color={color}\n        onSendMessage={message => {\n          sendMessage(\n            {\n              message,\n              date: new Date(Date.now()).toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true }),\n              nickname,\n              color\n            }\n          )\n        }} />\n    </div>\n  )\n}\n\nexport default Chat;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Chat from './components/Chat';\n\n\n\nReactDOM.render(<Chat />, document.getElementById('root'));"],"sourceRoot":""}