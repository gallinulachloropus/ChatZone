{"version":3,"sources":["components/_useChat.js","components/ChatBox/index.js","components/Messages/index.js","components/Settings/index.js","components/Chat.js","index.js"],"names":["useChat","useState","messages","setMessages","users","setUsers","socketRef","useRef","useEffect","process","PORT","HOST","window","location","hostname","console","log","current","socketIOClient","on","fullMessage","num","disconnect","sendMessage","emit","ChatBox","onSendMessage","nickname","message","setMessage","submit","className","rows","placeholder","value","onChange","e","target","onKeyDown","key","preventDefault","onClick","Messages","displayMessages","map","item","index","date","Settings","setNickname","nicknameForm","setNicknameForm","settingsToggle","setToggle","role","aria-label","onSubmit","type","Chat","localStorage","getItem","nick","setItem","Date","now","toLocaleString","hour","minute","second","hour12","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1a83531a.chunk.js","sourcesContent":["import { useEffect, useState, useRef } from 'react'\r\nimport socketIOClient from \"socket.io-client\"\r\n\r\nconst useChat = () => {\r\n    const [messages, setMessages] = useState([]) //array of messages\r\n    const [users, setUsers] = useState()\r\n    const socketRef = useRef()\r\n\r\n    useEffect(() => {\r\n        const PORT = process.env.PORT || 5000\r\n        const HOST = `${window.location.hostname}`\r\n        console.log(`Connected to ${HOST}`)\r\n        socketRef.current = socketIOClient(`${HOST}`) // reference to socketiocliet `${HOST}:${PORT}`\r\n\r\n        socketRef.current.on('newMessage', fullMessage => {\r\n            setMessages(messages => {\r\n                return [...messages, fullMessage]\r\n            })\r\n        })\r\n\r\n        socketRef.current.on('users', num => {\r\n            setUsers(num)\r\n        })\r\n\r\n\r\n        //cleanup\r\n        return () => {\r\n            socketRef.current.disconnect()\r\n        }\r\n    }, [])\r\n\r\n    const sendMessage = (fullMessage) => {\r\n        //send to all connected users\r\n        socketRef.current.emit('newMessage', fullMessage)\r\n    }\r\n    //return messages and sendMessage to use in chatbox\r\n    return { messages, sendMessage, users }\r\n}\r\n\r\nexport default useChat","import React, { useState } from 'react'\r\n\r\nconst ChatBox = ({ onSendMessage, nickname }) => {\r\n    const [message, setMessage] = useState('')\r\n\r\n    //cannot be normal form due to enter behavior on textarea\r\n    const submit = () => {\r\n        if (message) { onSendMessage(message) }\r\n        setMessage('')\r\n    }\r\n\r\n    return <div className=\"chatbox-container\">\r\n        <p className=\"nickname\">{nickname}: </p>\r\n        <textarea\r\n            rows=\"2\"\r\n            placeholder=\"Enter a message...\"\r\n            value={message}\r\n            onChange={e => setMessage(e.target.value)}\r\n            //set enter behavior\r\n            onKeyDown={e => {\r\n                if (e.key === 'Enter') {\r\n                    e.preventDefault()\r\n                    submit()\r\n                }\r\n            }}\r\n        >\r\n        </textarea>\r\n        <button onClick={e => { submit() }}>Submit</button>\r\n    </div>\r\n}\r\n\r\nexport default ChatBox\r\n","import React from 'react'\r\n\r\nconst Messages = ({ messages, users }) => {\r\n    const displayMessages = messages.map((item, index) => <li key={index}>{item.date} - {item.nickname}:  {item.message}</li>)\r\n\r\n    return (\r\n        <div className=\"messages\">\r\n            <h2>Chat</h2>\r\n            <h3>{users} user(s) online</h3>\r\n            <ul>\r\n                <li><em>Welcome to the chat.</em></li>\r\n                {displayMessages}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Messages\r\n","import React, { useState } from 'react'\r\n\r\nconst Settings = ({ nickname, setNickname }) => {\r\n\r\n    const [nicknameForm, setNicknameForm] = useState('')\r\n    const [settingsToggle, setToggle] = useState(false)\r\n    return settingsToggle ? (\r\n        <div className=\"settings\">\r\n            <button onClick={e => setToggle(!settingsToggle)}><span role=\"img\" aria-label=\"close\">‚úñÔ∏è</span></button>\r\n            <form onSubmit={e => {\r\n                e.preventDefault()\r\n                if (nicknameForm) { setNickname(nicknameForm) }\r\n                setNicknameForm('')\r\n            }} >\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Nickname\"\r\n                    value={nicknameForm}\r\n                    onChange={e => setNicknameForm(e.target.value)} />\r\n                <button>Save Settings</button>\r\n            </form>\r\n        </div >\r\n    ) : <button className='settings-button' onClick={e => setToggle(!settingsToggle)}><span role=\"img\" aria-label=\"Settings\">üîß</span></button>\r\n}\r\n\r\nexport default Settings\r\n","import React, { useState, useEffect } from 'react'\n\nimport './App.css';\nimport useChat from './_useChat'\nimport ChatBox from './ChatBox'\nimport Messages from './Messages'\nimport Settings from './Settings'\n\nconst Chat = () => {\n  const [nickname, setNickname] = useState('Anonymous')\n  const { messages, sendMessage, users } = useChat() // pull state and function to emit from useChat hook\n\n  useEffect(() => {\n    if (localStorage.getItem('nickname')) {\n      const nick = localStorage.getItem('nickname') || ''\n      setNickname(nick)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (nickname) {\n      localStorage.setItem('nickname', nickname)\n    }\n  })\n\n  return (\n    <div className=\"App\">\n      <Settings setNickname={setNickname} />\n      <Messages messages={messages} users={users} />\n      <ChatBox\n        nickname={nickname}\n        onSendMessage={message => {\n          sendMessage(\n            {\n              message,\n              date: new Date(Date.now()).toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true }),\n              nickname\n            }\n          )\n        }} />\n    </div>\n  )\n}\n\nexport default Chat;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Chat from './components/Chat';\n\n\n\nReactDOM.render(<Chat />, document.getElementById('root'));"],"sourceRoot":""}