{"version":3,"sources":["components/_useChat.js","components/ChatBox/index.js","components/Messages/index.js","components/Settings/index.js","components/Chat.js","index.js"],"names":["useChat","useState","storedMessages","setStoredMessages","messages","setMessages","users","setUsers","ioRef","useRef","useEffect","title","document","HOST","window","location","hostname","console","log","current","socketIOClient","on","Array","isArray","num","fullMessage","setTimeout","disconnect","sendMessage","emit","ChatBox","onSendMessage","nickname","color","message","setMessage","submit","length","alert","chat","className","style","ref","rows","placeholder","value","onChange","e","target","onKeyDown","key","preventDefault","onClick","Messages","stored","map","item","index","date","fontWeight","displayMessages","last","scrollIntoView","behavior","height","padding","margin","Settings","setNickname","setColor","nicknameForm","setNicknameForm","settingsToggle","setToggle","colorForm","setColorForm","colorOptions","i","role","aria-label","onSubmit","type","Chat","localStorage","getItem","n","c","setItem","Date","now","toLocaleString","hour","minute","second","hour12","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d02b1174.chunk.js","sourcesContent":["import { useEffect, useState, useRef } from 'react'\r\nimport socketIOClient from \"socket.io-client\"\r\n\r\nconst useChat = () => {\r\n    const [storedMessages, setStoredMessages] = useState([])\r\n    const [messages, setMessages] = useState([]) //array of messages\r\n    const [users, setUsers] = useState()\r\n    const ioRef = useRef()\r\n\r\n    useEffect(() => {\r\n        const title = document.title\r\n        //const DEV = window.location.hostname + ':5000'\r\n        const HOST = window.location.hostname\r\n        console.log(`Connected to ${HOST}`)\r\n        ioRef.current = socketIOClient(HOST) // reference to socketiocliet\r\n\r\n        ioRef.current.on('prevMsg', messages => {\r\n            if (Array.isArray(messages)) {\r\n                setStoredMessages(messages)\r\n            }\r\n        })\r\n\r\n        ioRef.current.on('users', num => {\r\n            setUsers(num)\r\n        })\r\n\r\n        ioRef.current.on('newMessage', fullMessage => {\r\n            document.title = `New Message ! | ${title}`\r\n            setTimeout(() => { document.title = title }, 3000)\r\n            setMessages(messages => {\r\n                return [...messages, fullMessage]\r\n            })\r\n        })\r\n\r\n\r\n\r\n\r\n        //cleanup\r\n        return () => {\r\n            ioRef.current.disconnect()\r\n        }\r\n    }, [])\r\n\r\n    const sendMessage = (fullMessage) => {\r\n        //send to all connected users\r\n        ioRef.current.emit('newMessage', fullMessage)\r\n    }\r\n    //return messages and sendMessage to use in chatbox\r\n    return { messages, sendMessage, users, storedMessages }\r\n}\r\n\r\nexport default useChat","import React, { useState, useRef } from 'react'\r\n\r\nconst ChatBox = ({ onSendMessage, nickname, color }) => {\r\n    const [message, setMessage] = useState('')\r\n    const submit = () => {\r\n        if (message) {\r\n            if (message.length < 300) {\r\n                onSendMessage(message)\r\n            } else { alert('Message must be under 300 characters.') }\r\n        }\r\n        setMessage('')\r\n    }\r\n    const chat = useRef()\r\n\r\n    return <div className=\"chatbox-container\">\r\n        <p className=\"nickname\" style={{ color }}>{nickname}: </p>\r\n        <textarea\r\n            ref={chat}\r\n            rows=\"2\"\r\n            placeholder=\"Enter a message...\"\r\n            value={message}\r\n            onChange={e => setMessage(e.target.value)}\r\n            //set enter behavior\r\n            onKeyDown={e => {\r\n                if (e.key === 'Enter') {\r\n                    e.preventDefault()\r\n                    submit()\r\n                }\r\n            }}\r\n        >\r\n        </textarea>\r\n        <button onClick={e => { submit() }}>Submit</button>\r\n    </div>\r\n}\r\n\r\nexport default ChatBox\r\n","import React, { useEffect, useRef } from 'react'\r\n\r\nconst Messages = ({ storedMessages, messages, users }) => {\r\n    let stored = ''\r\n    if (storedMessages) {\r\n        stored = storedMessages.map((item, index) => {\r\n            return <li key={index}>{item.date} - <span style={{ fontWeight: 'bold', color: item.color }}>{item.nickname}</span>:  {item.message}</li>\r\n        })\r\n    }\r\n    const displayMessages = messages.map((item, index) => {\r\n        return <li key={index}>{item.date} - <span style={{ fontWeight: 'bold', color: item.color }}>{item.nickname}</span>:  {item.message}</li>\r\n    })\r\n    const last = useRef()\r\n    const scrollToBottom = () => {\r\n        last.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n\r\n    useEffect(() => {\r\n        scrollToBottom()\r\n    }, [messages])\r\n\r\n    return (\r\n        <div className=\"messages\">\r\n            <h2>ChatZone</h2>\r\n            <h3>{users} user(s) online</h3>\r\n            <ul>\r\n                <li><em>Welcome to the chat.</em></li>\r\n                {stored}\r\n                {displayMessages}\r\n                <li style={{ height: '1px', padding: 0, margin: 0 }} ref={last}></li>\r\n            </ul>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Messages\r\n","import React, { useState } from 'react'\r\n\r\nconst Settings = ({ nickname, setNickname, color, setColor }) => {\r\n\r\n    const [nicknameForm, setNicknameForm] = useState('')\r\n    const [settingsToggle, setToggle] = useState(false)\r\n    const [colorForm, setColorForm] = useState(color)\r\n\r\n    const colors = ['Black', 'Red', 'Blue', 'Green', 'Teal', 'Purple', 'HotPink', 'Orange']\r\n    const colorOptions = colors.map((color, i) => <option key={i} value={color} style={{ color, fontWeight: 'bold' }}>{color}</option>)\r\n    return settingsToggle ? (\r\n        <div className=\"settings\">\r\n            <button className='settings-button' onClick={e => setToggle(!settingsToggle)}><span role=\"img\" aria-label=\"close\">‚úñÔ∏è</span></button>\r\n            <form onSubmit={e => {\r\n                e.preventDefault()\r\n                if (nicknameForm) { setNickname(nicknameForm) }\r\n                setColor(colorForm)\r\n                setNicknameForm('')\r\n                setToggle(!settingsToggle)\r\n            }} >\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Nickname\"\r\n                    value={nicknameForm}\r\n                    onChange={e => setNicknameForm(e.target.value)} />\r\n                <select\r\n                    onChange={e => setColorForm(e.target.value)}\r\n                    value={colorForm}\r\n                >\r\n                    {colorOptions}\r\n                </select>\r\n                <button><span role=\"img\" aria-label=\"Save\">üíæ</span> Save Settings</button>\r\n            </form>\r\n        </div >\r\n    ) : <button className='settings-button' onClick={e => setToggle(!settingsToggle)}><span role=\"img\" aria-label=\"Settings\">üîß</span></button>\r\n}\r\n\r\nexport default Settings\r\n","import React, { useState, useEffect } from 'react'\n\nimport './App.css';\nimport useChat from './_useChat'\nimport ChatBox from './ChatBox'\nimport Messages from './Messages'\nimport Settings from './Settings'\n\nconst Chat = () => {\n  const [nickname, setNickname] = useState('Anonymous')\n  const [color, setColor] = useState('Black')\n  const { messages, sendMessage, users, storedMessages } = useChat() // pull state and function to emit from useChat hook\n\n  useEffect(() => {\n    if (localStorage.getItem('nickname')) {\n      const n = localStorage.getItem('nickname') || ''\n      const c = localStorage.getItem('color') || ''\n      setColor(c)\n      setNickname(n)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (nickname) {\n      localStorage.setItem('nickname', nickname)\n    }\n    if (color) {\n      localStorage.setItem('color', color)\n    }\n  })\n\n  return (\n    <div className=\"App\">\n      <Settings setNickname={setNickname} color={color} setColor={setColor} />\n      <Messages storedMessages={storedMessages} messages={messages} users={users} />\n      <ChatBox\n        nickname={nickname}\n        color={color}\n        onSendMessage={message => {\n          sendMessage(\n            {\n              message,\n              date: new Date(Date.now()).toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true }),\n              nickname,\n              color\n            }\n          )\n        }} />\n    </div>\n  )\n}\n\nexport default Chat;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Chat from './components/Chat';\n\n\n\nReactDOM.render(<Chat />, document.getElementById('root'));"],"sourceRoot":""}